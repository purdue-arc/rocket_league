<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
    <link href="../../_static/favicons/favicon.ico" rel="icon" type="image/x-icon">
    <link href="../../_static/favicons/favicon-16x16.png" sizes="16x16" rel="icon" type="image/png">
    <link href="../../_static/favicons/favicon-32x32.png" sizes="32x32" rel="icon" type="image/png">
    <link rel="apple-touch-icon" href="../../_static/favicons/apple-touch-icon.png" sizes="180x180" type="image/png">
    <link rel="android-chrome" href="../../_static/favicons/android-chrome-192x192.png" sizes="192x192" type="image/png">
    <link rel="android-chrome" href="../../_static/favicons/android-chrome-512-512.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROS Nodes &mdash; Purdue ARC—Rocket League IRL  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="simulator" href="../../autoapi/simulator/index.html" />
    <link rel="prev" title="Launch Files" href="../launch/README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Purdue ARC—Rocket League IRL
              <img src="../../_static/arc_logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../packages.html">Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../rktl_autonomy.html">rktl_autonomy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rktl_control.html">rktl_control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rktl_game.html">rktl_game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rktl_launch.html">rktl_launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rktl_msgs.html">rktl_msgs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rktl_perception.html">rktl_perception</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../rktl_planner.html">rktl_planner</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../rktl_sim.html">rktl_sim</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../launch/README.html">Launch Files</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ROS Nodes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simulator">simulator</a></li>
<li class="toctree-l4"><a class="reference internal" href="#visualizer">visualizer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../autoapi/simulator/index.html">Package Module (Simulator)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../autoapi/visualizer/index.html">Package Module (Visualizer)</a></li>
<li class="toctree-l3"><a class="reference external" href="/rktl_sim/html/index-msg.html#http://">Msg/Srv Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Purdue ARC—Rocket League IRL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../packages.html">Packages</a></li>
          <li class="breadcrumb-item"><a href="../../rktl_sim.html">rktl_sim</a></li>
      <li class="breadcrumb-item active">ROS Nodes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/rktl_sim/nodes/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="ros-nodes">
<h1>ROS Nodes<a class="headerlink" href="#ros-nodes" title="Permalink to this heading"></a></h1>
<p>These are the <a class="reference external" href="http://wiki.ros.org/Nodes">ROS Nodes</a> provided by this package.
Most likely, you will use a launch file to run these. You can also run them
by using <code class="docutils literal notranslate"><span class="pre">rosrun</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosrun<span class="w"> </span>rktl_sim<span class="w"> </span>&lt;Node<span class="w"> </span>name&gt;
</pre></div>
</div>
<nav class="contents local" id="ros-nodes-in-the-package">
<p class="topic-title">ROS Nodes in the package</p>
<ul class="simple">
<li><p><a class="reference internal" href="#simulator" id="id3">simulator</a></p>
<ul>
<li><p><a class="reference internal" href="#subscribed-topics" id="id4">Subscribed Topics</a></p></li>
<li><p><a class="reference internal" href="#published-topics" id="id5">Published Topics</a></p></li>
<li><p><a class="reference internal" href="#parameters" id="id6">Parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#visualizer" id="id7">visualizer</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id8">Subscribed Topics</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id9">Parameters</a></p></li>
</ul>
</li>
</ul>
</nav>
<hr class="docutils" />
<section id="simulator">
<h2><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">simulator</a><a class="headerlink" href="#simulator" title="Permalink to this heading"></a></h2>
<p>This node wraps around a physics simulator and allows controlling a car
in a simulated environment. The ROS parameter server is used to configure the
simulator, and publishes sensor data and control commands as ROS messages.
The simulator is implemented in <code class="docutils literal notranslate"><span class="pre">simulator.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory. It can be
run in <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code> or <code class="docutils literal notranslate"><span class="pre">'ideal</span></code>’ mode by changing the <code class="docutils literal notranslate"><span class="pre">~mode</span></code> parameter. If the
mode is <code class="docutils literal notranslate"><span class="pre">'ideal'</span></code>, the simulator will use perfect sensor readings and ignore
any control effort messages that it receives. If the mode is <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>,
the simulator will add noise to sensor readings and simulate the effects of
control effort on the car’s motion. Many parameters are set in
<code class="docutils literal notranslate"><span class="pre">rktl_launch/config.global_params.yaml</span></code> or <code class="docutils literal notranslate"><span class="pre">rktl_sim/config/simulator.yaml</span></code>.</p>
<section id="subscribed-topics">
<h3><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">Subscribed Topics</a><a class="headerlink" href="#subscribed-topics" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/effort</span></code> (<a class="reference internal" href="#/rktl_msgs/html/msg/ControlEffort.html#http://"><span class="xref myst">rktl_msgs/ControlEffort</span></a>):
The car’s desired movement, in terms of throttle and steering amount. Only
subscribed to if the <code class="docutils literal notranslate"><span class="pre">~mode</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/command</span></code> (<a class="reference internal" href="#/rktl_msgs/html/msg/ControlCommand.html#http://"><span class="xref myst">rktl_msgs/ControlCommand</span></a>):
The car’s desired movement, in terms of velocity and steering angle. Only
subscribed to if the <code class="docutils literal notranslate"><span class="pre">~mode</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">'ideal'</span></code>.</p></li>
</ul>
</section>
<section id="published-topics">
<h3><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">Published Topics</a><a class="headerlink" href="#published-topics" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/ball/pose_sync_early</span></code> (<a class="reference internal" href="#/geometry_msgs/html/msg/PoseWithCovarianceStamped.html#http://"><span class="xref myst">geometry_msgs/PoseWithCovarianceStamped</span></a>):
Pose of the ball with a timestamp and added noise. Only published if the
<code class="docutils literal notranslate"><span class="pre">~mode</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/ball/odom_truth</span></code> (<a class="reference internal" href="#/nav_msgs/html/msg/Odometry.html#http://"><span class="xref myst">nav_msgs/Odometry</span></a>):
Odometry of the ball with no added noise. Only published if the <code class="docutils literal notranslate"><span class="pre">~mode</span></code>
parameter is set to <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/ball/odom</span></code> (<a class="reference internal" href="#/nav_msgs/html/msg/Odometry.html#http://"><span class="xref myst">nav_msgs/Odometry</span></a>):
Odometry of the ball with no added noise. Only published if the <code class="docutils literal notranslate"><span class="pre">~mode</span></code>
parameter is set to <code class="docutils literal notranslate"><span class="pre">'ideal'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/pose_sync_early</span></code> (<a class="reference internal" href="#/geometry_msgs/html/msg/PoseWithCovarianceStamped.html#http://"><span class="xref myst">geometry_msgs/PoseWithCovarianceStamped</span></a>):
Pose of the car with a timestamp and added noise. Only published if the
<code class="docutils literal notranslate"><span class="pre">~mode</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/odom_truth</span></code> (<a class="reference internal" href="#/nav_msgs/html/msg/Odometry.html#http://"><span class="xref myst">nav_msgs/Odometry</span></a>):
Odometry of the car with no added noise. Only published if the <code class="docutils literal notranslate"><span class="pre">~mode</span></code>
parameter is set to <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/odom</span></code> (<a class="reference internal" href="#/nav_msgs/html/msg/Odometry.html#http://"><span class="xref myst">nav_msgs/Odometry</span></a>):
Odometry of the car with no added noise. Only published if the <code class="docutils literal notranslate"><span class="pre">~mode</span></code>
parameter is set to <code class="docutils literal notranslate"><span class="pre">'ideal'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">match_status</span></code> (<a class="reference internal" href="#/rktl_msgs/html/msg/MatchStatus.html#http://"><span class="xref myst">rktl_msgs/MatchStatus</span></a>):
Status of the match, whether the match is ongoing or if a goal has been
scored, ending the match (and which goal it was scored on).</p></li>
</ul>
</section>
<section id="parameters">
<h3><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">~mode</span></code> (string): Mode of the simulator (either ‘<code class="docutils literal notranslate"><span class="pre">ideal'</span></code> or <code class="docutils literal notranslate"><span class="pre">'realistic'</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~render</span></code> (bool, default: False): Whether or not to enable rendering of the
simulation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~rate</span></code> (int, default: 30): Rate at which to run the simulation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~frame_id</span></code> (string, default: ‘map’): Frame ID to use for published ROS
messages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~timeout</span></code> (int, default: 10): Timeout in seconds for certain simulator
functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/width</span></code> (float): Width of the playing field, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/length</span></code> (float): Length of the playing field, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/wall_thickness</span></code> (float): Thickness of the walls around the playing
field, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/goal/width</span></code> (float): Width of the goals, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~spawn_height</span></code> (float, default: 0.06): Height at which to spawn the ball and
car.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~urdf</span></code> (dict): Dictionary of URDF file paths for each robot. Can be set by
setting <code class="docutils literal notranslate"><span class="pre">urdf/*</span></code> to whatever is needed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~ball/init_pose</span></code> (list): List of 3 floats representing the initial position
of the ball.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~ball/init_speed</span></code> (list): List of 3 floats representing the initial speed of
the ball.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~ball/sensor_noise</span></code> (dict): Dictionary of noise parameters for the ball’s
sensors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/length</span></code> (float): Length of the car, front to rear wheel center to
center, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/throttle/max_speed</span></code> (float): Maximum speed of the car, in meters per
second.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/throttle/tau</span></code> (float): The throttle time constant, in seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/steering/max_throw</span></code> (float): The maximum steering throw, in radians.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/steering/rate</span></code> (float): The maxmimum steering rate, in radians per
second.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~car/init_pose</span></code> (list): List of 3 floats representing the initial position
of the car.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~car/sensor_noise</span></code> (dict): Dictionary of noise parameters for the car’s
sensors.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="visualizer">
<h2><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">visualizer</a><a class="headerlink" href="#visualizer" title="Permalink to this heading"></a></h2>
<p>This node provides a visualizer that uses Pygame to show the position of a car
and a ball on a playing field. The script subscribes to topics that provide
information about the position of the car and the ball, and updates their
position in the visualizer accordingly. Additionally, the script can display a
planned path for the car using a linear path or a bezier curve. Many parameters
are set in <code class="docutils literal notranslate"><span class="pre">rktl_launch/config.global_params.yaml</span></code> or
<code class="docutils literal notranslate"><span class="pre">rktl_sim/config/visualizer.yaml</span></code>.</p>
<section id="id1">
<h3><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">Subscribed Topics</a><a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/ball/odom</span></code> (<a class="reference internal" href="#/nav_msgs/html/msg/Odometry.html#http://"><span class="xref myst">nav_msgs/Odometry</span></a>):
The ball’s odometry information containing its position, orientation, and velocities.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/odom</span></code> (<a class="reference internal" href="#/nav_msgs/html/msg/Odometry.html#http://"><span class="xref myst">nav_msgs/Odometry</span></a>):
The car’s odometry information containing its position, orientation, and velocities.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/path</span></code> (<a class="reference internal" href="#/rktl_msgs/html/msg/Path.html#http://"><span class="xref myst">rktl_msgs/Path</span></a>):
Used for visualizing the path the car should follow as a series of waypoints.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/cars/car0/lookahead_pnt</span></code> (<a class="reference internal" href="#/std_msgs/html/msg/Float32.html#http://"><span class="xref myst">std_msgs/Float32</span></a>):
Used for visualizing the path the lookahead point for a pure pursuit algorithm.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/agents/agent0/bezier_path</span></code> (<a class="reference internal" href="#/rktl_msgs/html/msg/BezierPathList.html#http://"><span class="xref myst">rktl_msgs/BezierPathList</span></a>):
Used for visualizing the path the car should follow as a bezier curve.</p></li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#ros-nodes-in-the-package" role="doc-backlink">Parameters</a><a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/field/width</span></code> (float): Width of the playing field, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/length</span></code> (float): Length of the playing field, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/wall_thickness</span></code> (float): Thickness of the walls around the playing
field, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/field/goal/width</span></code> (float): Width of the goals, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/ball/radius</span></code> (float): Radius of the ball, in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">window_name</span></code> (string, default: ‘Rocket League Visualizer’): Name of the
window</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~frame_id</span></code> (string, default: ‘map’): Frame ID to use for published ROS
messages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~timeout</span></code> (int, default: 10): Timeout in seconds for certain simulator
functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~rate</span></code> (int, default: 30): Rate at which to run the simulation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~cars/body_width</span></code> (float): Rendered width of the car in the visualizer, in
meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~cars/body_length</span></code> (float): Rendered length of the car in the visualizer,
in meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~media/field</span></code> (string): Path to the image representing the field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~media/car</span></code> (string): Path to the image representing the car.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~media/ball</span></code> (string): Path to the image representing the ball.</p></li>
</ul>
<hr class="docutils" />
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../launch/README.html" class="btn btn-neutral float-left" title="Launch Files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../autoapi/simulator/index.html" class="btn btn-neutral float-right" title="simulator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Autonomous Robotics Club of Purdue (Purdue ARC).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
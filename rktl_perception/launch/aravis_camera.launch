<launch>
  <arg name="load_manager" default="true"/>
  <arg name="manager_name" default="camera_manager"/>
  <arg name="manager_threads" default="4"/>
  <arg name="camera_name" default="cam0"/>
  <arg name="launch_aravis" default="true"/>
  <arg name="launch_boilerplate" default="true"/>

  <group ns="$(arg camera_name)">
    <include if="$(arg launch_boilerplate)" file="$(find rktl_perception)/launch/camera_boilerplate.launch" pass_all_args="true" />
    <node unless="$(arg launch_boilerplate)" pkg="nodelet" type="nodelet" name="$(arg manager_name)" args="manager" output="screen">
      <param name="num_worker_threads" value="$(arg manager_threads)"/>
    </node>

    <!-- Aravis RGB camera nodelet -->
    <node if="$(arg launch_aravis)" pkg="nodelet" type="nodelet" name="$(arg camera_name)" args="load camera_aravis/CameraAravisNodelet $(arg manager_name)" output="screen">
      <rosparam command="load" file="$(find rktl_perception)/config/$(arg camera_name)/aravis.yaml"/>
      <param name="frame_id" value="$(arg camera_name)"/>
      <param name="camera_info_url" value="package://rktl_perception/config/$(arg camera_name)/calibration.yaml"/>
      <remap from="$(arg camera_name)/image_raw" to="image_raw"/>
      <remap from="$(arg camera_name)/camera_info" to="camera_info"/>
    </node>
  </group>
</launch>

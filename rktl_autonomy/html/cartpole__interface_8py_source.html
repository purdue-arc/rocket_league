<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>rktl_autonomy: cartpole_interface.py Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ec517c5622d0a81552b696b0b6d250c6.html">rktl_autonomy</a></li><li class="navelem"><a class="el" href="dir_06b7925dc1aa0d86533e5c38ae4b6b67.html">src</a></li><li class="navelem"><a class="el" href="dir_b2156cc8cc6f7a9dad46f7f445ba12dc.html">rktl_autonomy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">cartpole_interface.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cartpole__interface_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacerktl__autonomy_1_1cartpole__interface.html">    1</a></span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">Cartpole is a very simple environment included within OpenAI Gym. There is not</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral">much of a reason to use it, except for verifying the functionality of this</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral">library. Two different interfaces are provided, `CartpoleInterface` and</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">`CartpoleDirectInterface`. The former uses the `ROSInterface` class and the</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral">latter directly owns the Gym environment. To verify the `ROSInterface` worked,</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">it was confirmed that they both behave the same way.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral">License:</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="stringliteral">  BSD 3-Clause License</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="stringliteral">  Copyright (c) 2023, Autonomous Robotics Club of Purdue (Purdue ARC)</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="stringliteral">  All rights reserved.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"># package</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">from</span> rktl_autonomy <span class="keyword">import</span> ROSInterface</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">from</span> gym.spaces <span class="keyword">import</span> Discrete, Box</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"># ROS</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> rospy</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">from</span> std_msgs.msg <span class="keyword">import</span> Int32, Float32, Float32MultiArray, Bool</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">from</span> std_srvs.srv <span class="keyword">import</span> Empty</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"># System</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">from</span> enum <span class="keyword">import</span> IntEnum, unique, auto</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">from</span> math <span class="keyword">import</span> pi</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;@unique</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions.html">   30</a></span>&#160;<span class="keyword">class </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions.html">CartpoleActions</a>(IntEnum):</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Possible actions for deep learner.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions.html#a09d74739cd540348d41f76cfb8883f51">   32</a></span>&#160;    LEFT = 0</div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions.html#a60b7750cac88546723029435c3203ea0">   33</a></span>&#160;    RIGHT = auto()</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions.html#a3a2b75df0ebcaa38e7c128caec77b6e5">   34</a></span>&#160;    SIZE = auto()</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html">   36</a></span>&#160;<span class="keyword">class </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html">CartpoleInterface</a>(<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html">ROSInterface</a>):</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;ROS interface for the cartpole game.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adc6b6a320bf583984a1e225cdb05b126">   38</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adc6b6a320bf583984a1e225cdb05b126">__init__</a>(self, eval=False, launch_file=[&#39;rktl_autonomy&#39;, &#39;cartpole_train.launch&#39;], launch_args=[], run_id=None):</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        super().<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adc6b6a320bf583984a1e225cdb05b126">__init__</a>(node_name=<span class="stringliteral">&#39;cartpole_agent&#39;</span>, eval=eval, launch_file=launch_file, launch_args=launch_args, run_id=run_id)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="comment"># Publishers</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6e536959fe068e148ba7f426f68c0848">   42</a></span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6e536959fe068e148ba7f426f68c0848">_action_pub</a> = rospy.Publisher(<span class="stringliteral">&#39;cartpole/action&#39;</span>, Int32, queue_size=1)</div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ad183a6ed206b509870f99a29bbd3c444">   43</a></span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ad183a6ed206b509870f99a29bbd3c444">_reset_srv</a> = rospy.ServiceProxy(<span class="stringliteral">&#39;cartpole/reset&#39;</span>, Empty)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="comment"># State variables</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">   46</a></span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">_obs</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">   47</a></span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">_reward</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">   48</a></span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">_done</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="comment"># Subscribers</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;cartpole/observation&#39;</span>, Float32MultiArray, self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a62f48c94640d64115e6dc069a0e650e6">_obs_cb</a>)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;cartpole/done&#39;</span>, Bool, self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af16b2b6bd88b7d6ff5f4ffdf6484e7be">_done_cb</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        rospy.Subscriber(<span class="stringliteral">&#39;cartpole/reward&#39;</span>, Float32, self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ac02d1ee698fab552d9a344180cc92f26">_reward_cb</a>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    @property</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a3593fd4787a98414628792ec6f25b509">   56</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a3593fd4787a98414628792ec6f25b509">action_space</a>(self):</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;The Space object corresponding to valid actions.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">return</span> Discrete(CartpoleActions.SIZE)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    @property</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a421ab81616672255cb17e1020684d9a9">   61</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a421ab81616672255cb17e1020684d9a9">observation_space</a>(self):</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;The Space object corresponding to valid observations.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> Box(low=-pi, high=pi, shape=(4,), dtype=np.float32)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a37645fb119992a3a11098ea9fd1c148a">   65</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a37645fb119992a3a11098ea9fd1c148a">_reset_env</a>(self):</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Reset environment for a new training episode.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ad183a6ed206b509870f99a29bbd3c444">_reset_srv</a>.call()</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#abc05ed6674e8a052e120cd775d010c04">   69</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#abc05ed6674e8a052e120cd775d010c04">_reset_self</a>(self):</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Reset internally for a new episode.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#a753ef399822a24428a114d1015f80a89">_clear_state</a>()</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af4235a0d63870846387fbef61f3fd90a">   73</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af4235a0d63870846387fbef61f3fd90a">_has_state</a>(self):</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Determine if the new state is ready.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> (</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">_obs</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">_reward</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">_done</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#aa9c9019fa4c6cfed83fc8f3dfb4b31a8">   80</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#aa9c9019fa4c6cfed83fc8f3dfb4b31a8">_clear_state</a>(self):</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Clear state variables / flags in preparation for new ones.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">_obs</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">_reward</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">_done</a> = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adb5f29e9677de77e716268b14af19c5a">   86</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adb5f29e9677de77e716268b14af19c5a">_get_state</a>(self):</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Get state tuple (observation, reward, done, info).&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keyword">assert</span> self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#af8928d9b21493cede066fb9dccf35dd9">_has_state</a>()</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> (self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">_obs</a>, self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">_reward</a>, self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">_done</a>, {})</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a8c3e7af9fb90c3a443807acfa8ef66fe">   91</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a8c3e7af9fb90c3a443807acfa8ef66fe">_publish_action</a>(self, action):</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Publish an action to the ROS network.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keyword">assert</span> action &gt;= 0 <span class="keywordflow">and</span> action &lt; self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#ac3e834fd622e16a5d7872c3d2bf90ffa">action_space</a>.n</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6e536959fe068e148ba7f426f68c0848">_action_pub</a>.publish(action)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a62f48c94640d64115e6dc069a0e650e6">   96</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a62f48c94640d64115e6dc069a0e650e6">_obs_cb</a>(self, obs_msg):</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Callback for observation of game.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keyword">assert</span> len(obs_msg.data) == self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#a9c9adafa9571b198150098a89326d3c2">observation_space</a>.shape[0]</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">_obs</a> = np.asarray(obs_msg.data, dtype=np.float32)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">with</span> self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">_cond</a>:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">_cond</a>.notify_all()</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ac02d1ee698fab552d9a344180cc92f26">  103</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ac02d1ee698fab552d9a344180cc92f26">_reward_cb</a>(self, reward_msg):</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Callback for reward of game.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">_reward</a> = reward_msg.data</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">with</span> self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">_cond</a>:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">_cond</a>.notify_all()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af16b2b6bd88b7d6ff5f4ffdf6484e7be">  109</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af16b2b6bd88b7d6ff5f4ffdf6484e7be">_done_cb</a>(self, done_msg):</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Callback for if episode is done.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        self.<a class="code" href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">_done</a> = done_msg.data</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keyword">with</span> self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">_cond</a>:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            self.<a class="code" href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">_cond</a>.notify_all()</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html">rktl_autonomy.cartpole_interface.CartpoleInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00036">cartpole_interface.py:36</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_aa9c9019fa4c6cfed83fc8f3dfb4b31a8"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#aa9c9019fa4c6cfed83fc8f3dfb4b31a8">rktl_autonomy.cartpole_interface.CartpoleInterface._clear_state</a></div><div class="ttdeci">def _clear_state(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00080">cartpole_interface.py:80</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_adb5f29e9677de77e716268b14af19c5a"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adb5f29e9677de77e716268b14af19c5a">rktl_autonomy.cartpole_interface.CartpoleInterface._get_state</a></div><div class="ttdeci">def _get_state(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00086">cartpole_interface.py:86</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1__ros__interface_1_1ROSInterface_html_adb6c940f142329e9343a446c9fb1fdcf"><div class="ttname"><a href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#adb6c940f142329e9343a446c9fb1fdcf">rktl_autonomy._ros_interface.ROSInterface._cond</a></div><div class="ttdeci">_cond</div><div class="ttdef"><b>Definition:</b> <a href="__ros__interface_8py_source.html#l00096">_ros_interface.py:96</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a37645fb119992a3a11098ea9fd1c148a"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a37645fb119992a3a11098ea9fd1c148a">rktl_autonomy.cartpole_interface.CartpoleInterface._reset_env</a></div><div class="ttdeci">def _reset_env(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00065">cartpole_interface.py:65</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1__ros__interface_1_1ROSInterface_html_a9c9adafa9571b198150098a89326d3c2"><div class="ttname"><a href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#a9c9adafa9571b198150098a89326d3c2">rktl_autonomy._ros_interface.ROSInterface.observation_space</a></div><div class="ttdeci">def observation_space(self)</div><div class="ttdef"><b>Definition:</b> <a href="__ros__interface_8py_source.html#l00216">_ros_interface.py:216</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1__ros__interface_1_1ROSInterface_html_ac3e834fd622e16a5d7872c3d2bf90ffa"><div class="ttname"><a href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#ac3e834fd622e16a5d7872c3d2bf90ffa">rktl_autonomy._ros_interface.ROSInterface.action_space</a></div><div class="ttdeci">def action_space(self)</div><div class="ttdef"><b>Definition:</b> <a href="__ros__interface_8py_source.html#l00210">_ros_interface.py:210</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1__ros__interface_1_1ROSInterface_html_af8928d9b21493cede066fb9dccf35dd9"><div class="ttname"><a href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#af8928d9b21493cede066fb9dccf35dd9">rktl_autonomy._ros_interface.ROSInterface._has_state</a></div><div class="ttdeci">def _has_state(self)</div><div class="ttdef"><b>Definition:</b> <a href="__ros__interface_8py_source.html#l00231">_ros_interface.py:231</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_abc05ed6674e8a052e120cd775d010c04"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#abc05ed6674e8a052e120cd775d010c04">rktl_autonomy.cartpole_interface.CartpoleInterface._reset_self</a></div><div class="ttdeci">def _reset_self(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00069">cartpole_interface.py:69</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1__ros__interface_1_1ROSInterface_html_a753ef399822a24428a114d1015f80a89"><div class="ttname"><a href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html#a753ef399822a24428a114d1015f80a89">rktl_autonomy._ros_interface.ROSInterface._clear_state</a></div><div class="ttdeci">def _clear_state(self)</div><div class="ttdef"><b>Definition:</b> <a href="__ros__interface_8py_source.html#l00236">_ros_interface.py:236</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a3593fd4787a98414628792ec6f25b509"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a3593fd4787a98414628792ec6f25b509">rktl_autonomy.cartpole_interface.CartpoleInterface.action_space</a></div><div class="ttdeci">def action_space(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00056">cartpole_interface.py:56</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a6e536959fe068e148ba7f426f68c0848"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6e536959fe068e148ba7f426f68c0848">rktl_autonomy.cartpole_interface.CartpoleInterface._action_pub</a></div><div class="ttdeci">_action_pub</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00042">cartpole_interface.py:42</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a421ab81616672255cb17e1020684d9a9"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a421ab81616672255cb17e1020684d9a9">rktl_autonomy.cartpole_interface.CartpoleInterface.observation_space</a></div><div class="ttdeci">def observation_space(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00061">cartpole_interface.py:61</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1__ros__interface_1_1ROSInterface_html"><div class="ttname"><a href="classrktl__autonomy_1_1__ros__interface_1_1ROSInterface.html">rktl_autonomy._ros_interface.ROSInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="__ros__interface_8py_source.html#l00025">_ros_interface.py:25</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_af4235a0d63870846387fbef61f3fd90a"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af4235a0d63870846387fbef61f3fd90a">rktl_autonomy.cartpole_interface.CartpoleInterface._has_state</a></div><div class="ttdeci">def _has_state(self)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00073">cartpole_interface.py:73</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a9f5a76146674171bfb1322ed8527cd4c"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a9f5a76146674171bfb1322ed8527cd4c">rktl_autonomy.cartpole_interface.CartpoleInterface._reward</a></div><div class="ttdeci">_reward</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00047">cartpole_interface.py:47</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_adc6b6a320bf583984a1e225cdb05b126"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#adc6b6a320bf583984a1e225cdb05b126">rktl_autonomy.cartpole_interface.CartpoleInterface.__init__</a></div><div class="ttdeci">def __init__(self, eval=False, launch_file=['rktl_autonomy', 'cartpole_train.launch'], launch_args=[], run_id=None)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00038">cartpole_interface.py:38</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions_html"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleActions.html">rktl_autonomy.cartpole_interface.CartpoleActions</a></div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00030">cartpole_interface.py:30</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_af16b2b6bd88b7d6ff5f4ffdf6484e7be"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#af16b2b6bd88b7d6ff5f4ffdf6484e7be">rktl_autonomy.cartpole_interface.CartpoleInterface._done_cb</a></div><div class="ttdeci">def _done_cb(self, done_msg)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00109">cartpole_interface.py:109</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a98c11145368343f98cf30b955e8fa1b1"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a98c11145368343f98cf30b955e8fa1b1">rktl_autonomy.cartpole_interface.CartpoleInterface._done</a></div><div class="ttdeci">_done</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00048">cartpole_interface.py:48</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_ac02d1ee698fab552d9a344180cc92f26"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ac02d1ee698fab552d9a344180cc92f26">rktl_autonomy.cartpole_interface.CartpoleInterface._reward_cb</a></div><div class="ttdeci">def _reward_cb(self, reward_msg)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00103">cartpole_interface.py:103</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a8c3e7af9fb90c3a443807acfa8ef66fe"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a8c3e7af9fb90c3a443807acfa8ef66fe">rktl_autonomy.cartpole_interface.CartpoleInterface._publish_action</a></div><div class="ttdeci">def _publish_action(self, action)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00091">cartpole_interface.py:91</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a62f48c94640d64115e6dc069a0e650e6"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a62f48c94640d64115e6dc069a0e650e6">rktl_autonomy.cartpole_interface.CartpoleInterface._obs_cb</a></div><div class="ttdeci">def _obs_cb(self, obs_msg)</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00096">cartpole_interface.py:96</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_ad183a6ed206b509870f99a29bbd3c444"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#ad183a6ed206b509870f99a29bbd3c444">rktl_autonomy.cartpole_interface.CartpoleInterface._reset_srv</a></div><div class="ttdeci">_reset_srv</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00043">cartpole_interface.py:43</a></div></div>
<div class="ttc" id="aclassrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface_html_a6f041895da004b15ab9984f6f9412831"><div class="ttname"><a href="classrktl__autonomy_1_1cartpole__interface_1_1CartpoleInterface.html#a6f041895da004b15ab9984f6f9412831">rktl_autonomy.cartpole_interface.CartpoleInterface._obs</a></div><div class="ttdeci">_obs</div><div class="ttdef"><b>Definition:</b> <a href="cartpole__interface_8py_source.html#l00046">cartpole_interface.py:46</a></div></div>

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/rktl_autonomy">rktl_autonomy</a><br />
Author(s): James Baxter <baxter26@purdue.edu>, Meenakshi McNamara <mcnama20@purdue.edu>, Haddy Alchaer <halchaer@purdue.edu>, Reuben Georgi <rgeorgi@purdue.edu></br />
<small>autogenerated on Mon Nov 6 2023 03:08:24</small>
</div>
</body>
</html>
